var E=Object.defineProperty,J=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var N=(p,a,i)=>a in p?E(p,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[a]=i,U=(p,a)=>{for(var i in a||(a={}))H.call(a,i)&&N(p,i,a[i]);if(A)for(var i of A(a))Y.call(a,i)&&N(p,i,a[i]);return p},D=(p,a)=>J(p,q(a));var P=(p,a,i)=>new Promise((w,f)=>{var c=l=>{try{h(i.next(l))}catch(k){f(k)}},y=l=>{try{h(i.throw(l))}catch(k){f(k)}},h=l=>l.done?w(l.value):Promise.resolve(l.value).then(c,y);h((i=i.apply(p,a)).next())});import{_ as K,r as _,A as Q,a as W,c as X,b as g,g as x,d as t,e as r,u as s,j as b,l as S,m as V,w as m,k as Z,t as v,F as R,f as T,o as d,i as n,B as j,s as ee,h as F,D as te}from"./index.js";import{B as se}from"./Badge.js";const ae={class:"flex h-full bg-gray-50 overflow-hidden relative rounded-2xl border border-gray-200"},oe={class:"p-6 border-b border-gray-100 flex justify-between items-center"},le={class:"text-lg font-bold text-gray-900 flex items-center gap-2"},re={class:"bg-primary-100 p-1.5 rounded-lg text-primary-600"},ie={class:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar"},ne={class:"space-y-4"},de={class:"relative"},ce=["disabled"],ue={class:"relative"},ge=["disabled"],pe={class:"relative"},be=["disabled"],ve={class:"p-6 border-t border-gray-100 bg-gray-50/50"},me={class:"flex-1 flex flex-col overflow-hidden relative w-full"},xe={class:"h-16 border-b border-gray-200 bg-white flex items-center justify-between px-4 md:px-8 z-10 shrink-0"},fe={class:"flex items-center gap-3"},ye={class:"text-xl font-bold text-gray-900 truncate"},he={key:0,class:"text-gray-400 font-normal text-sm ml-2 hidden sm:inline"},_e={key:0,class:"flex items-center gap-2"},we={class:"text-xs font-medium text-gray-500 mr-2 hidden sm:inline"},ke=["disabled"],Ce=["disabled"],je={class:"flex-1 overflow-y-auto p-4 md:p-8 relative custom-scrollbar"},Le={key:0,class:"h-full flex flex-col items-center justify-center text-center max-w-md mx-auto"},Se={class:"w-20 h-20 bg-primary-50 rounded-full flex items-center justify-center mb-6 animate-pulse"},Ve={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Fe={key:2,class:"grid grid-cols-1 xl:grid-cols-2 gap-6 pb-20"},Be=["onClick"],ze={class:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity"},$e={class:"flex items-start gap-5"},Ae={class:"w-14 h-14 rounded-full bg-gradient-to-br from-primary-50 to-indigo-100 text-primary-700 flex items-center justify-center font-bold text-lg shadow-inner border border-white shrink-0"},Ne={class:"flex-1 min-w-0"},Ue={class:"flex items-center gap-2 mb-1"},De={class:"font-bold text-lg text-gray-900 truncate group-hover:text-primary-600 transition-colors"},Pe={class:"text-sm font-medium text-primary-600 truncate mb-3"},Re={class:"flex flex-wrap gap-y-2 gap-x-4 text-xs text-gray-500"},Te={key:0,class:"flex items-center gap-1.5 bg-gray-50 px-2 py-1 rounded border border-gray-100"},Ie={class:"truncate max-w-[120px]"},Me={key:1,class:"flex items-center gap-1.5 bg-gray-50 px-2 py-1 rounded border border-gray-100"},Ge={class:"truncate max-w-[120px]"},Oe={class:"text-xl font-bold flex items-center gap-2"},Ee={class:"p-1.5 bg-primary-100 rounded-lg text-primary-600"},Je={key:0,class:"mt-6"},qe={class:"text-center mb-8"},He={class:"w-24 h-24 rounded-full bg-gray-100 mx-auto flex items-center justify-center text-3xl font-bold text-gray-400 mb-4 border-4 border-white shadow-lg"},Ye={class:"text-2xl font-bold text-gray-900"},Ke={class:"text-lg text-gray-500 font-medium"},Qe={class:"bg-gray-50 rounded-2xl p-6 border border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-8 relative overflow-hidden"},We={class:"relative z-10"},Xe={class:"flex items-center gap-3"},Ze={class:"p-2 bg-white rounded-lg shadow-sm"},et={class:"font-bold text-gray-900 text-lg"},tt={class:"relative z-10"},st={class:"flex items-center gap-3"},at={class:"p-2 bg-white rounded-lg shadow-sm"},ot={class:"font-bold text-gray-900 text-lg"},lt={class:"mt-8 bg-blue-50 border border-blue-100 rounded-xl p-4 flex items-start gap-3"},rt={class:"flex justify-between w-full"},it={__name:"LeadGenerator",setup(p){const a=_({job_title:"",location:"",industry:""}),i=_(1),w=_(null),f=_(!1),c=_(null),y=_(!1);Q(()=>{document.title="Lead Generator"});const h=W(()=>a.value.job_title||a.value.location||a.value.industry),l=X({url:"ai_calling_agent.api.search_apollo_leads",makeParams(u){return{job_title:a.value.job_title,location:a.value.location,industry:a.value.industry,page:i.value,per_page:10}},onSuccess(u){return u.map(e=>D(U({},e),{is_saved:!1}))}});function k(){!h.value||(i.value=1,l.fetch())}function B(u){i.value+=u,l.fetch()}function I(){a.value={job_title:"",location:"",industry:""},i.value=1,l.reset()}function M(u){c.value=u,f.value=!0}function z(u){return u?u.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?"}function G(u){return P(this,null,function*(){w.value=u.id;try{const e=yield fetch("/api/method/ai_calling_agent.api.save_apollo_lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apollo_id:u.id})}),C=yield e.json();e.ok?(u.is_saved=!0,c.value&&c.value.id===u.id&&(c.value.is_saved=!0)):alert(C.message||"Failed to save lead")}catch(e){console.error(e),alert("An error occurred")}finally{w.value=null}})}return(u,e)=>{var C,$;return d(),g("div",ae,[y.value?(d(),g("div",{key:0,class:"fixed inset-0 bg-gray-900/50 z-20 lg:hidden backdrop-blur-sm transition-opacity",onClick:e[0]||(e[0]=o=>y.value=!1)})):x("",!0),t("aside",{class:Z(["fixed lg:static inset-y-0 left-0 z-30 bg-white border-r border-gray-200 flex flex-col shadow-soft w-80 shrink-0 transition-transform duration-300 transform lg:transform-none",y.value?"translate-x-0":"-translate-x-full"])},[t("div",oe,[t("h2",le,[t("div",re,[r(s(n),{name:"filter",class:"w-4 h-4"})]),e[11]||(e[11]=b(" Filter Leads ",-1))]),t("button",{class:"lg:hidden text-gray-500 hover:text-gray-700",onClick:e[1]||(e[1]=o=>y.value=!1)},[r(s(n),{name:"x",class:"w-5 h-5"})])]),e[17]||(e[17]=t("p",{class:"px-6 text-xs text-gray-500 mt-4 lg:hidden"}," Refine your search criteria below. ",-1)),t("div",ie,[t("div",ne,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs font-bold text-gray-700 uppercase mb-1.5 ml-1"},"Job Title",-1)),t("div",de,[r(s(n),{name:"briefcase",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),S(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.job_title=o),type:"text",placeholder:"e.g. CEO, Founder",class:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-shadow",disabled:s(l).loading},null,8,ce),[[V,a.value.job_title]])])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs font-bold text-gray-700 uppercase mb-1.5 ml-1"},"Location",-1)),t("div",ue,[r(s(n),{name:"map-pin",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),S(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.location=o),type:"text",placeholder:"e.g. San Francisco, London",class:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-shadow",disabled:s(l).loading},null,8,ge),[[V,a.value.location]])])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-xs font-bold text-gray-700 uppercase mb-1.5 ml-1"},"Industry",-1)),t("div",pe,[r(s(n),{name:"globe",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),S(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.industry=o),type:"text",placeholder:"e.g. SaaS, Healthcare",class:"w-full pl-9 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-shadow",disabled:s(l).loading},null,8,be),[[V,a.value.industry]])])])])]),t("div",ve,[r(s(j),{variant:"solid",class:"w-full justify-center py-3 !bg-primary-600 hover:!bg-primary-700 !text-white !rounded-xl shadow-lg shadow-primary-500/20 active:scale-95 transition-all text-sm font-bold",loading:s(l).loading,onClick:k},{prefix:m(()=>[r(s(n),{name:"search",class:"w-4 h-4"})]),default:m(()=>[e[15]||(e[15]=b(" Find Leads ",-1))]),_:1},8,["loading"]),h.value?(d(),g("button",{key:0,onClick:I,class:"w-full mt-3 text-xs font-medium text-gray-500 hover:text-primary-600 flex items-center justify-center gap-1 transition-colors"},[r(s(n),{name:"x",class:"w-3 h-3"}),e[16]||(e[16]=b(" Clear Filters ",-1))])):x("",!0)])],2),t("main",me,[t("div",xe,[t("div",fe,[t("button",{class:"lg:hidden p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",onClick:e[5]||(e[5]=o=>y.value=!0)},[r(s(n),{name:"filter",class:"w-5 h-5"})]),t("h1",ye,[e[18]||(e[18]=b("Results ",-1)),(C=s(l).data)!=null&&C.length?(d(),g("span",he,"("+v(s(l).data.length)+" found)",1)):x("",!0)])]),($=s(l).data)!=null&&$.length?(d(),g("div",_e,[t("span",we,"Page "+v(i.value),1),t("button",{class:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:i.value===1||s(l).loading,onClick:e[6]||(e[6]=o=>B(-1))},[r(s(n),{name:"chevron-left",class:"w-4 h-4"})],8,ke),t("button",{class:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:!s(l).data||s(l).data.length<10||s(l).loading,onClick:e[7]||(e[7]=o=>B(1))},[r(s(n),{name:"chevron-right",class:"w-4 h-4"})],8,Ce)])):x("",!0)]),t("div",je,[!s(l).data&&!s(l).loading?(d(),g("div",Le,[t("div",Se,[r(s(n),{name:"search",class:"w-10 h-10 text-primary-400"})]),e[19]||(e[19]=t("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"Start Your Search",-1)),e[20]||(e[20]=t("p",{class:"text-gray-500 leading-relaxed"}," Use the filters on the left to discover verified B2B contacts. Access millions of leads powered by Apollo.io. ",-1))])):s(l).loading?(d(),g("div",Ve,[(d(),g(R,null,T(6,o=>t("div",{key:o,class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm animate-pulse h-48 flex flex-col justify-between"},[...e[21]||(e[21]=[ee('<div class="flex items-start gap-4" data-v-0db5c4bc><div class="h-12 w-12 bg-gray-200 rounded-full shrink-0" data-v-0db5c4bc></div><div class="flex-1 space-y-2" data-v-0db5c4bc><div class="h-4 bg-gray-200 rounded w-3/4" data-v-0db5c4bc></div><div class="h-3 bg-gray-200 rounded w-1/2" data-v-0db5c4bc></div></div></div><div class="h-8 bg-gray-100 rounded-lg w-full mt-4" data-v-0db5c4bc></div>',2)])])),64))])):(d(),g("div",Fe,[(d(!0),g(R,null,T(s(l).data,o=>(d(),g("div",{key:o.id,onClick:L=>M(o),class:"group bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg hover:border-primary-200 hover:-translate-y-1 transition-all duration-300 cursor-pointer relative overflow-hidden"},[t("div",ze,[r(s(n),{name:"arrow-up-right",class:"w-5 h-5 text-primary-500"})]),t("div",$e,[t("div",Ae,v(z(o.name)),1),t("div",Ne,[t("div",Ue,[t("h4",De,v(o.name),1),o.is_saved?(d(),F(s(se),{key:0,theme:"green",variant:"subtle",size:"sm",class:"shrink-0 flex items-center gap-1"},{default:m(()=>[r(s(n),{name:"check",class:"w-3 h-3"}),e[22]||(e[22]=b(" Saved ",-1))]),_:1})):x("",!0)]),t("p",Pe,v(o.title||"Unknown Title"),1),t("div",Re,[o.company?(d(),g("div",Te,[r(s(n),{name:"briefcase",class:"w-3 h-3 text-gray-400"}),t("span",Ie,v(o.company),1)])):x("",!0),o.location?(d(),g("div",Me,[r(s(n),{name:"map-pin",class:"w-3 h-3 text-gray-400"}),t("span",Ge,v(o.location),1)])):x("",!0)])])]),e[23]||(e[23]=t("div",{class:"mt-5 pt-4 border-t border-gray-100 flex justify-between items-center"},[t("span",{class:"text-xs font-semibold text-gray-400 uppercase tracking-wider"},"Apollo Verified"),t("span",{class:"text-xs text-primary-600 font-medium group-hover:underline"},"View Profile")],-1))],8,Be))),128))]))])]),r(s(te),{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=o=>f.value=o),options:{size:"xl"}},{"body-title":m(()=>[t("h3",Oe,[t("div",Ee,[r(s(n),{name:"user-plus",class:"w-5 h-5"})]),e[24]||(e[24]=b(" Verified Profile ",-1))])]),"body-content":m(()=>[c.value?(d(),g("div",Je,[t("div",qe,[t("div",He,v(z(c.value.name)),1),t("h2",Ye,v(c.value.name),1),t("p",Ke,v(c.value.title),1)]),t("div",Qe,[e[27]||(e[27]=t("div",{class:"absolute -right-10 -bottom-10 w-40 h-40 bg-indigo-50 rounded-full opacity-50 pointer-events-none"},null,-1)),t("div",We,[e[25]||(e[25]=t("label",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block"},"Organization",-1)),t("div",Xe,[t("div",Ze,[r(s(n),{name:"briefcase",class:"w-5 h-5 text-gray-600"})]),t("span",et,v(c.value.company||"N/A"),1)])]),t("div",tt,[e[26]||(e[26]=t("label",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block"},"Location",-1)),t("div",st,[t("div",at,[r(s(n),{name:"map-pin",class:"w-5 h-5 text-gray-600"})]),t("span",ot,v(c.value.location||"N/A"),1)])])]),t("div",lt,[r(s(n),{name:"info",class:"w-5 h-5 text-blue-600 mt-0.5 shrink-0"}),e[28]||(e[28]=t("div",null,[t("h4",{class:"font-bold text-blue-900 text-sm"},"Credit Usage Info"),t("p",{class:"text-sm text-blue-700 mt-1"},[b(" Clicking "),t("strong",null,'"Reveal & Save"'),b(" will deduct "),t("strong",null,"1 credit"),b(" from your Apollo quota to fetch verified email/phone data and add this contact to your CRM. ")])],-1))])])):x("",!0)]),actions:m(()=>{var o,L;return[t("div",rt,[r(s(j),{variant:"subtle",onClick:e[8]||(e[8]=O=>f.value=!1)},{default:m(()=>[...e[29]||(e[29]=[b("Cancel",-1)])]),_:1}),(o=c.value)!=null&&o.is_saved?(d(),F(s(j),{key:1,variant:"outline",class:"!bg-green-50 !text-green-700 !border-green-200 cursor-default"},{prefix:m(()=>[r(s(n),{name:"check",class:"w-4 h-4"})]),default:m(()=>[e[31]||(e[31]=b(" Saved to CRM ",-1))]),_:1})):(d(),F(s(j),{key:0,variant:"solid",class:"!bg-primary-600 hover:!bg-primary-700 !text-white !rounded-xl !px-6 shadow-lg shadow-primary-500/20",loading:w.value===((L=c.value)==null?void 0:L.id),onClick:e[9]||(e[9]=O=>G(c.value))},{prefix:m(()=>[r(s(n),{name:"download-cloud",class:"w-4 h-4"})]),default:m(()=>[e[30]||(e[30]=b(" Reveal & Save Contact ",-1))]),_:1},8,["loading"]))])]}),_:1},8,["modelValue"])])}}};var ut=K(it,[["__scopeId","data-v-0db5c4bc"]]);export{ut as default};
